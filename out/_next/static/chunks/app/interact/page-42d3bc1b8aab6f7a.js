(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1559],{95057:function(e,s,r){Promise.resolve().then(r.bind(r,83226))},83226:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return page}});var t=r(57437),a=r(2265),l=r(49080),n=r(88798),i=r(20331),c=r(47012),o=r(74548),d=r.n(o),x=r(98608),m=r(16049),f=r(23732),u=r(57515),v=r(49569),h=r(29172),j=r(41154),g=r(16691),p=r.n(g),components_AssetDetails=e=>{let{reserve:s}=e;console.log("Reserve",s);let r=j.zd.find(e=>{if(console.log("Assettttttt",e.contractAddress.toLowerCase(),s.underlyingAsset.toLowerCase(),typeof e.contractAddress,typeof s.underlyingAsset,e.contractAddress.toLowerCase()==s.underlyingAsset.toLowerCase()),e.contractAddress.toLowerCase()===s.underlyingAsset.toLowerCase())return e});return console.log("Asset Image",r),(0,t.jsxs)("div",{className:"flex gap-4 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[r&&(0,t.jsx)(p(),{src:r.logo,alt:r.name,width:30,height:30}),(0,t.jsx)("div",{className:"text-xl font-[500]",children:s.reserve.name})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"text-sm font-[300] text-gray-600",children:"APY"}),(0,t.jsxs)("div",{children:[(100*parseFloat(s.reserve.variableBorrowAPY)).toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{children:parseFloat(s.totalBorrowsMarketReferenceCurrency).toFixed(2)}),(0,t.jsxs)("div",{children:["$",parseFloat(s.totalBorrowsUSD).toFixed(2)]})]})]})},y=r(49598),N=r(23611),A=r(80969),components_AssetBalance=e=>{let{userDetails:s}=e;return(0,t.jsxs)("div",{className:"mx-8 my-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-[700]",children:"Asset Details"}),(0,t.jsxs)("div",{className:"flex gap-4 my-6",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center ",children:[(0,t.jsx)("div",{className:"rounded-lg px-2 py-2 self-center",children:(0,t.jsx)(h.F9M,{size:30})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"text-sm font-[300] text-gray-600",children:"Health Factor"}),(0,t.jsx)("div",{className:"text-lg font-[600]",children:parseFloat(s.healthFactor).toFixed(2)})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("div",{className:"rounded-lg px-2 py-2 self-center",children:[" ",(0,t.jsx)(h.OZg,{size:30})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"text-sm font-[300] text-gray-600",children:"Net worth"}),(0,t.jsxs)("div",{className:"text-lg font-[600]",children:["$",parseFloat(s.netWorthUSD).toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(y.Zb,{className:"flex flex-col flex-1",children:[(0,t.jsxs)(y.Ol,{children:[(0,t.jsx)(y.ll,{children:"Your Borrows"}),(0,t.jsx)(y.SZ,{children:"Assets that you have borrowed from Pool"})]}),(0,t.jsxs)(y.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 mb-8",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xl text-[700] text-gray-700",children:"Amount Supplied"}),(0,t.jsxs)(N.z,{variant:"secondary",children:["$",parseFloat(s.totalLiquidityUSD).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xl text-[700] text-gray-700",children:"Amount Borrowed"}),(0,t.jsxs)(N.z,{variant:"secondary",children:["$",parseFloat(s.totalBorrowsUSD).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xl text-[700] text-gray-700",children:"Collateral Amount"}),(0,t.jsxs)(N.z,{variant:"secondary",children:["$",parseFloat(s.totalCollateralUSD).toFixed(2)]})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:s.userReservesData.map((e,s)=>(0,t.jsx)("div",{children:(0,t.jsx)(components_AssetDetails,{reserve:e})},s))})]})]}),(0,t.jsx)(A.Z,{})]})]})},page=()=>{let[e,s]=(0,a.useState)(),{provider:r,safeSDKKit:o,selectedSafe:h}=(0,l.useAuth)(),j=null==r?void 0:r.getSigner();console.log(j,o,h,"signer");let g=new x.I({uiPoolDataProviderAddress:u.rZ,provider:r,chainId:m.a_.mainnet}),p=new f.X({uiIncentiveDataProviderAddress:u.WS,provider:r,chainId:m.a_.mainnet});async function fetchContractData(){let e=await g.getReservesHumanized({lendingPoolAddressProvider:u.AI}),r=await g.getUserReservesHumanized({lendingPoolAddressProvider:u.AI,user:h}),t=await p.getReservesIncentivesDataHumanized({lendingPoolAddressProvider:u.AI}),a=await p.getUserReservesIncentivesDataHumanized({lendingPoolAddressProvider:u.AI,user:h});console.log({reserves:e,userReserves:r,reserveIncentives:t,userIncentives:a});let l=e.reservesData,n=e.baseCurrencyData,i=r.userReserves,o=d()().unix(),x=(0,v.DA)({reserves:l,currentTimestamp:o,marketReferenceCurrencyDecimals:n.marketReferenceCurrencyDecimals,marketReferencePriceInUsd:n.marketReferenceCurrencyPriceInUsd}),m=(0,c.n)({currentTimestamp:o,marketReferencePriceInUsd:n.marketReferenceCurrencyPriceInUsd,marketReferenceCurrencyDecimals:n.marketReferenceCurrencyDecimals,userReserves:i,formattedReserves:x,userEmodeCategoryId:r.userEmodeCategoryId,reserveIncentives:t,userIncentives:a});console.log("userSummary",m),s(m)}return console.log("poolDataProviderContract",g,p,"incentiveDataProviderContract"),(0,a.useEffect)(()=>{r&&fetchContractData()},[r]),(0,t.jsxs)("main",{children:[(0,t.jsx)("h1",{className:"text-4xl font-[700] text-center my-8",children:"Supply or Borrow from your Safe Wallet"}),e&&(0,t.jsx)(components_AssetBalance,{userDetails:e}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 mx-8",children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)(n.Z,{})]})]})}}},function(e){e.O(0,[1866,3808,7699,8922,4059,7021,6053,8069,2971,2472,1744],function(){return e(e.s=95057)}),_N_E=e.O()}]);